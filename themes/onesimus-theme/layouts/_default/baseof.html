<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ if not .IsHome }}{{ .Title }} — {{ end }}{{ .Site.Title }}</title>
  <meta name="description" content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

  <!-- Open Graph -->
  <meta property="og:title" content="{{ .Title }}">
  <meta property="og:description" content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{ with .Site.Params.ogImage }}<meta property="og:image" content="{{ . | absURL }}">{{ end }}

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,600;0,9..40,700;0,9..40,800;1,9..40,400&family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- CSS -->
  {{ $css := resources.Get "css/main.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $css.RelPermalink }}">

  <!-- Canonical -->
  <link rel="canonical" href="{{ .Permalink }}">

  <!-- RSS -->
  {{ range .AlternativeOutputFormats }}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s">` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
  {{ end }}

  {{ block "head" . }}{{ end }}
</head>
<body>
  {{- partial "nav.html" . -}}

  <main>
    {{- block "main" . }}{{ end -}}
  </main>

  {{- partial "footer.html" . -}}

  <script>
    // Mobile nav toggle
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.querySelector('.nav__hamburger');
      const links = document.querySelector('.nav__links');
      if (btn && links) {
        btn.addEventListener('click', () => {
          links.classList.toggle('active');
          btn.textContent = links.classList.contains('active') ? '✕' : '☰';
        });
      }
    });
  </script>

  {{ block "scripts" . }}{{ end }}
</body>
</html>
